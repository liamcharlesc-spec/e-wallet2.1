<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Notifications</title>

<style>
:root{
  --bg-gradient: linear-gradient(180deg,#0b0f1a 0%, #1a2030 100%);
  --accent-neon:#00ffcc;
  --cta-green:#4bb06d;
  --text-light:#f0f0f0;
}

*{box-sizing:border-box;}
body{
  background:var(--bg-gradient);
  font-family: Inter, system-ui, "Segoe UI", Roboto, Arial;
  display:flex;
  justify-content:center;
  padding:20px;
  min-height:85vh;
  color:var(--text-light);
}

.phone{
  width:360px;
  border-radius:28px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  min-height:780px;
  box-shadow:0 8px 30px rgba(0,0,0,0.3);
  position:relative;
}

/* Top header */
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px;
}
.top h2{
  font-size:18px;
  color:var(--accent-neon);
}
.back-btn{
  font-size:18px;
  cursor:pointer;
  color:var(--accent-neon);
}

/* Tabs */
.tabs{
  display:flex;
  justify-content:space-around;
  margin:12px 20px;
}
.tab{
  flex:1;
  padding:8px;
  text-align:center;
  border-radius:16px;
  cursor:pointer;
  background:rgba(255,255,255,0.05);
  transition:0.3s;
  font-weight:600;
}
.tab.active{
  background:var(--accent-neon);
  color:#000;
}

/* Notifications list */
.notifications{
  flex:1;
  overflow-y:auto;
  margin:12px 20px;
}
.notification-item{
  background:rgba(255,255,255,0.05);
  margin-bottom:10px;
  padding:12px;
  border-radius:12px;
}
.notification-item h4{
  margin:0 0 4px 0;
  font-size:14px;
  color:var(--accent-neon);
}
.notification-item p{
  margin:0;
  font-size:12px;
  opacity:0.9;
}

/* Clear Transactions Button */
.clear-btn{
  margin:10px 20px 90px;
  padding:10px;
  text-align:center;
  border-radius:14px;
  background:#ff4d4d;
  color:#fff;
  font-weight:600;
  cursor:pointer;
  display:none;
  transition:0.3s;
}
.clear-btn:hover{opacity:0.9;}

/* Bottom nav */
.bottom-nav{
  margin:12px 20px;
  display:flex;
  justify-content:space-around;
  align-items:center;
  background:rgba(0,0,0,0.4);
  border-radius:16px;
  padding:6px 0;
  box-shadow:0 6px 18px rgba(0,0,0,0.3);
  position:absolute;
  bottom:12px;
  width:calc(100% - 40px);
}
.nav-item{
  flex:1;
  text-align:center;
  cursor:pointer;
  padding:6px 0;
  border-radius:12px;
  transition:0.3s;
}
.nav-item.active{
  box-shadow:0 0 10px var(--accent-neon),0 0 20px var(--accent-neon);
}
.nav-item svg{ width:22px; height:22px; stroke:white; }
</style>
</head>

<body>
<div class="phone">

  <div class="top">
    <div class="back-btn" onclick="window.location.href='homedashboard.html'">&#8592; Home</div>
    <h2>Notifications</h2>
    <div></div>
  </div>

  <div class="tabs">
    <div class="tab active" id="updates-tab">Updates</div>
    <div class="tab" id="transactions-tab">Transactions</div>
  </div>

  <div class="notifications" id="notifications-list"></div>

  <!-- Clear Transactions Button -->
  <div class="clear-btn" id="clear-btn">Clear Transactions</div>

  <div class="bottom-nav">
    <div class="nav-item" onclick="window.location.href='homedashboard.html'">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M3 11l9-7 9 7"/><path d="M9 22V12h6v10"/>
      </svg>
    </div>
    <div class="nav-item active">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M18 8a6 6 0 10-12 0v5l-2 2h16l-2-2V8z"/>
        <path d="M13.73 21a2 2 0 01-3.46 0"/>
      </svg>
    </div>
    <div class="nav-item" onclick="window.location.href='qr.html'">
      <svg viewBox="0 0 24 24" fill="none">
        <rect x="3" y="3" width="6" height="6" rx="1"/>
        <rect x="15" y="3" width="6" height="6" rx="1"/>
        <rect x="3" y="15" width="6" height="6" rx="1"/>
        <rect x="15" y="15" width="6" height="6" rx="1"/>
      </svg>
    </div>
    <div class="nav-item" onclick="window.location.href='profile.html'">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
    </div>
  </div>

</div>

<script>
const updates = [
  {title:"App Update", msg:"New version 2.0 is available."},
  {title:"Promo", msg:"Get 10% cashback on your next load."},
  {title:"Security", msg:"Your password was changed successfully."}
];

const notificationsList = document.getElementById("notifications-list");
const updatesTab = document.getElementById("updates-tab");
const transactionsTab = document.getElementById("transactions-tab");
const clearBtn = document.getElementById("clear-btn");

function getTransactionsFromStorage(){
  const storedTx = JSON.parse(localStorage.getItem("transactions")) || [];
  return storedTx.map(tx=>{
    const amount = tx.amount || 0;
    let type = tx.type || "Cash In";
    let msg = "";

    if(tx.billType){
      type = "Bills Payment";
      msg = `PHP ${amount.toFixed(2)} paid for ${tx.billType}`;
    } else if(tx.account && type==="Sent Money"){
      msg = `PHP ${amount.toFixed(2)} sent to ${tx.account}`;
    } else if(tx.account && type==="Received Money"){
      msg = `PHP ${amount.toFixed(2)} received from ${tx.account}`;
    } else {
      msg = `PHP ${amount.toFixed(2)} added to your wallet`;
    }
    return {title:type, msg:msg};
  });
}

function showNotifications(list){
  notificationsList.innerHTML = "";
  list.reverse().forEach(item=>{
    const div = document.createElement("div");
    div.className = "notification-item";
    div.innerHTML = `<h4>${item.title}</h4><p>${item.msg}</p>`;
    notificationsList.appendChild(div);
  });
}

showNotifications(updates);

updatesTab.onclick = ()=>{
  updatesTab.classList.add("active");
  transactionsTab.classList.remove("active");
  clearBtn.style.display = "none";
  showNotifications(updates);
};

transactionsTab.onclick = ()=>{
  transactionsTab.classList.add("active");
  updatesTab.classList.remove("active");
  clearBtn.style.display = "block";

  const tx = getTransactionsFromStorage();
  if(tx.length){
    showNotifications(tx);
  } else {
    notificationsList.innerHTML =
      `<div class="notification-item">
        <h4>No Transactions</h4>
        <p>No transaction history found.</p>
      </div>`;
  }
};

clearBtn.onclick = ()=>{
  if(confirm("Clear all transactions?")){
    localStorage.removeItem("transactions");
    notificationsList.innerHTML =
      `<div class="notification-item">
        <h4>No Transactions</h4>
        <p>Transaction history cleared.</p>
      </div>`;
  }
};
</script>

</body>
</html>
